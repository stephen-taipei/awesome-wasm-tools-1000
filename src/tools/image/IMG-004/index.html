<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IMG-004 HEIC/HEIF è½‰æ›å™¨ - Awesome WASM Tools 1000</title>
  <meta name="description" content="å°‡ iPhone HEIC/HEIF ç…§ç‰‡è½‰æ›ç‚º JPG/PNG æ ¼å¼ï¼Œå®Œå…¨åœ¨æœ¬åœ°è™•ç†">
  <link rel="stylesheet" href="/src/styles/global.css">
  <style>
    .format-options {
      display: flex;
      gap: 1rem;
      margin-top: 0.5rem;
    }
    .format-radio {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      background: var(--bg-input);
      border: 2px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.2s;
    }
    .format-radio:hover {
      border-color: var(--primary);
    }
    .format-radio.active {
      border-color: var(--primary);
      background: rgba(99, 102, 241, 0.2);
    }
    .format-radio input {
      display: none;
    }
    .heic-info {
      background: rgba(99, 102, 241, 0.1);
      border: 1px solid var(--primary);
      border-radius: var(--radius);
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .heic-info h4 {
      color: var(--primary);
      margin-bottom: 0.5rem;
    }
    .heic-info p {
      color: var(--text-secondary);
      font-size: 0.9rem;
      margin: 0;
    }
    .batch-info {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: var(--bg-input);
      border-radius: var(--radius);
      margin-bottom: 1rem;
    }
    .batch-count {
      font-weight: bold;
      color: var(--primary);
    }
  </style>
</head>
<body>
  <div class="tool-page">
    <header class="tool-header">
      <a href="/index.html" class="back-btn">
        <span>â†</span>
        <span data-i18n="back">è¿”å›</span>
      </a>
      <div class="tool-title">
        <h1>IMG-004 <span data-i18n="img004_name">HEIC/HEIF è½‰æ›å™¨</span></h1>
        <p data-i18n="img004_desc">å°‡ iPhone HEIC/HEIF ç…§ç‰‡è½‰æ›ç‚º JPG/PNG æ ¼å¼</p>
      </div>
      <div class="lang-switcher">
        <button onclick="setLanguage('zh-TW')" class="lang-btn">ç¹ä¸­</button>
        <button onclick="setLanguage('en')" class="lang-btn">EN</button>
      </div>
    </header>

    <main class="tool-content">
      <!-- Info Box -->
      <div class="heic-info">
        <h4>ğŸ“± ä»€éº¼æ˜¯ HEIC/HEIFï¼Ÿ</h4>
        <p data-i18n="heic_explanation">HEIC (High Efficiency Image Container) æ˜¯ Apple å¾ iOS 11 é–‹å§‹ä½¿ç”¨çš„é è¨­ç…§ç‰‡æ ¼å¼ï¼Œæ¯” JPEG å£“ç¸®ç‡æ›´é«˜ä½†ç›¸å®¹æ€§è¼ƒå·®ã€‚æœ¬å·¥å…·å¯å°‡å…¶è½‰æ›ç‚ºé€šç”¨æ ¼å¼ã€‚</p>
      </div>

      <!-- Status Messages -->
      <div id="statusMessage" class="status-message"></div>

      <!-- Upload Area -->
      <div id="uploadArea" class="upload-area">
        <div class="icon">ğŸ“±</div>
        <h3 data-i18n="upload_title_heic">æ‹–æ”¾ HEIC/HEIF åœ–ç‰‡åˆ°æ­¤è™•</h3>
        <p data-i18n="upload_subtitle">æˆ–é»æ“Šé¸æ“‡æª”æ¡ˆ</p>
        <p class="upload-formats" data-i18n="upload_formats_heic">æ”¯æ´æ ¼å¼ï¼šHEIC, HEIFï¼ˆæ”¯æ´æ‰¹é‡è½‰æ›ï¼‰</p>
        <input type="file" id="fileInput" class="file-input" accept=".heic,.heif,image/heic,image/heif" multiple>
      </div>

      <!-- Batch Info -->
      <div id="batchInfo" class="batch-info" style="display: none;">
        <span>ğŸ“</span>
        <span data-i18n="selected_files">å·²é¸æ“‡</span>
        <span id="fileCount" class="batch-count">0</span>
        <span data-i18n="files">å€‹æª”æ¡ˆ</span>
      </div>

      <!-- Settings Panel -->
      <div class="settings-panel">
        <h3 data-i18n="settings">è¼¸å‡ºè¨­å®š</h3>

        <div class="setting-row">
          <label data-i18n="output_format">è¼¸å‡ºæ ¼å¼</label>
          <div class="format-options">
            <label class="format-radio active" data-format="jpeg">
              <input type="radio" name="format" value="jpeg" checked>
              <span>JPG</span>
            </label>
            <label class="format-radio" data-format="png">
              <input type="radio" name="format" value="png">
              <span>PNG</span>
            </label>
          </div>
        </div>

        <div id="qualityRow" class="setting-row">
          <label data-i18n="quality">å“è³ª</label>
          <input type="range" id="qualitySlider" min="1" max="100" value="92">
          <span id="qualityValue" class="quality-value">92%</span>
        </div>

        <div class="setting-row info-row">
          <span class="info-icon">â„¹ï¸</span>
          <span data-i18n="heic_convert_info">HEIC è½‰æ›éœ€è¦è¼‰å…¥ WASM æ¨¡çµ„ï¼Œé¦–æ¬¡ä½¿ç”¨å¯èƒ½éœ€è¦å¹¾ç§’é˜</span>
        </div>
      </div>

      <!-- Progress Bar -->
      <div id="progressContainer" class="progress-container">
        <div class="progress-bar">
          <div id="progressFill" class="progress-fill"></div>
        </div>
        <p id="progressText" class="progress-text" data-i18n="converting">è½‰æ›ä¸­...</p>
      </div>

      <!-- Preview Area -->
      <div id="previewArea" class="preview-area" style="display: none;">
        <div class="preview-box">
          <div class="preview-header">
            <h4 data-i18n="original">åŸå§‹åœ–ç‰‡</h4>
            <span id="originalSize" class="file-size">-</span>
          </div>
          <div class="preview-image-container">
            <img id="originalImage" alt="Original">
          </div>
        </div>
        <div class="preview-box">
          <div class="preview-header">
            <h4 data-i18n="converted">è½‰æ›çµæœ</h4>
            <span id="convertedSize" class="file-size">-</span>
          </div>
          <div class="preview-image-container">
            <img id="convertedImage" alt="Converted">
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button id="convertBtn" class="btn btn-primary" disabled>
          <span>ğŸ”„</span>
          <span data-i18n="convert">é–‹å§‹è½‰æ›</span>
        </button>
        <button id="downloadBtn" class="btn btn-success" style="display: none;">
          <span>â¬‡ï¸</span>
          <span id="downloadText" data-i18n="download">ä¸‹è¼‰</span>
        </button>
        <button id="resetBtn" class="btn btn-secondary" style="display: none;">
          <span>ğŸ—‘ï¸</span>
          <span data-i18n="reset">é‡ç½®</span>
        </button>
      </div>

      <!-- Performance Info -->
      <div id="performanceInfo" class="settings-panel" style="display: none;">
        <h3>ğŸ“Š æ•ˆèƒ½è³‡è¨Š</h3>
        <div class="setting-row">
          <label>è™•ç†æ™‚é–“</label>
          <span id="processTime">-</span>
        </div>
        <div class="setting-row">
          <label>æª”æ¡ˆè®ŠåŒ–</label>
          <span id="compressionRatio">-</span>
        </div>
        <div class="setting-row">
          <label>è§£æåº¦</label>
          <span id="imageResolution">-</span>
        </div>
      </div>
    </main>

    <footer class="footer">
      <p data-i18n="footer_privacy">æ‰€æœ‰æª”æ¡ˆè™•ç†å‡åœ¨æœ¬åœ°å®Œæˆï¼Œä¸æœƒä¸Šå‚³åˆ°ä¼ºæœå™¨</p>
    </footer>
  </div>

  <script type="module" src="/src/i18n/i18n.js"></script>
  <script type="module" src="./converter.js"></script>
</body>
</html>
