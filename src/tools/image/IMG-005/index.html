<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IMG-005 AVIF è½‰æ›å™¨ - Awesome WASM Tools 1000</title>
  <meta name="description" content="AVIF æ¬¡ä¸–ä»£åœ–ç‰‡æ ¼å¼è½‰æ›ï¼Œæ¯” WebP å£“ç¸®ç‡æ›´é«˜">
  <link rel="stylesheet" href="/src/styles/global.css">
  <style>
    .format-selector {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    .format-option {
      flex: 1;
      padding: 1rem;
      background: var(--bg-input);
      border: 2px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      text-align: center;
      transition: all 0.2s;
    }
    .format-option:hover {
      border-color: var(--primary);
    }
    .format-option.active {
      border-color: var(--primary);
      background: rgba(99, 102, 241, 0.2);
    }
    .format-option h4 {
      margin-bottom: 0.25rem;
    }
    .format-option p {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }
    .avif-info {
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid var(--secondary);
      border-radius: var(--radius);
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .avif-info h4 {
      color: var(--secondary);
      margin-bottom: 0.5rem;
    }
    .avif-info p {
      color: var(--text-secondary);
      font-size: 0.9rem;
      margin: 0;
    }
    .browser-support {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.5rem;
      flex-wrap: wrap;
    }
    .browser-badge {
      padding: 0.25rem 0.5rem;
      background: var(--bg-input);
      border-radius: 4px;
      font-size: 0.75rem;
      color: var(--text-secondary);
    }
    .browser-badge.supported {
      background: rgba(34, 197, 94, 0.2);
      color: var(--success);
    }
  </style>
</head>
<body>
  <div class="tool-page">
    <header class="tool-header">
      <a href="/index.html" class="back-btn">
        <span>â†</span>
        <span data-i18n="back">è¿”å›</span>
      </a>
      <div class="tool-title">
        <h1>IMG-005 <span data-i18n="img005_name">AVIF è½‰æ›å™¨</span></h1>
        <p data-i18n="img005_desc">AVIF æ¬¡ä¸–ä»£åœ–ç‰‡æ ¼å¼è½‰æ›ï¼Œå£“ç¸®ç‡æ¯” WebP æ›´é«˜</p>
      </div>
      <div class="lang-switcher">
        <button onclick="setLanguage('zh-TW')" class="lang-btn">ç¹ä¸­</button>
        <button onclick="setLanguage('en')" class="lang-btn">EN</button>
      </div>
    </header>

    <main class="tool-content">
      <!-- Info Box -->
      <div class="avif-info">
        <h4>ğŸš€ ä»€éº¼æ˜¯ AVIFï¼Ÿ</h4>
        <p data-i18n="avif_explanation">AVIF (AV1 Image File Format) æ˜¯åŸºæ–¼ AV1 è¦–è¨Šç·¨ç¢¼çš„æ¬¡ä¸–ä»£åœ–ç‰‡æ ¼å¼ã€‚ç›¸åŒå“è³ªä¸‹ï¼Œæª”æ¡ˆå¤§å°æ¯” JPEG å° 50%ã€æ¯” WebP å° 20%ï¼Œæ”¯æ´ HDR å’Œé€æ˜åº¦ã€‚</p>
        <div class="browser-support">
          <span class="browser-badge supported" id="chromeSupport">Chrome 85+</span>
          <span class="browser-badge supported" id="firefoxSupport">Firefox 93+</span>
          <span class="browser-badge" id="safariSupport">Safari 16+</span>
          <span class="browser-badge supported" id="edgeSupport">Edge 85+</span>
        </div>
      </div>

      <!-- Status Messages -->
      <div id="statusMessage" class="status-message"></div>

      <!-- Conversion Direction -->
      <div class="settings-panel">
        <h3 data-i18n="conversion_direction">è½‰æ›æ–¹å‘</h3>
        <div class="format-selector">
          <div class="format-option active" data-direction="to-avif" onclick="setDirection('to-avif')">
            <h4>PNG/JPG/WebP â†’ AVIF</h4>
            <p data-i18n="to_avif_desc">è½‰æ›ç‚º AVIFï¼Œæª”æ¡ˆæœ€å°</p>
          </div>
          <div class="format-option" data-direction="from-avif" onclick="setDirection('from-avif')">
            <h4>AVIF â†’ PNG/JPG</h4>
            <p data-i18n="from_avif_desc">è½‰æ›ç‚ºé€šç”¨æ ¼å¼</p>
          </div>
        </div>
      </div>

      <!-- Upload Area -->
      <div id="uploadArea" class="upload-area">
        <div class="icon">ğŸ–¼ï¸</div>
        <h3 id="uploadTitle" data-i18n="upload_title_avif_in">æ‹–æ”¾ PNG/JPG/WebP åœ–ç‰‡åˆ°æ­¤è™•</h3>
        <p data-i18n="upload_subtitle">æˆ–é»æ“Šé¸æ“‡æª”æ¡ˆ</p>
        <p id="uploadFormats" class="upload-formats" data-i18n="upload_formats_avif_in">æ”¯æ´æ ¼å¼ï¼šPNG, JPG, WebP</p>
        <input type="file" id="fileInput" class="file-input" accept="image/png,image/jpeg,image/webp">
      </div>

      <!-- Settings Panel -->
      <div id="outputSettings" class="settings-panel">
        <h3 data-i18n="settings">è¼¸å‡ºè¨­å®š</h3>

        <!-- Output format (for from-avif mode) -->
        <div id="outputFormatRow" class="setting-row" style="display: none;">
          <label data-i18n="output_format">è¼¸å‡ºæ ¼å¼</label>
          <select id="outputFormat" style="padding: 0.5rem; background: var(--bg-input); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
            <option value="png">PNG (ç„¡æ)</option>
            <option value="jpg">JPG (æœ‰æ)</option>
          </select>
        </div>

        <!-- Quality slider -->
        <div id="qualityRow" class="setting-row">
          <label data-i18n="quality">å“è³ª</label>
          <input type="range" id="qualitySlider" min="1" max="100" value="80">
          <span id="qualityValue" class="quality-value">80%</span>
        </div>

        <div class="setting-row info-row">
          <span class="info-icon">â„¹ï¸</span>
          <span id="avifInfo" data-i18n="avif_quality_info">AVIF åœ¨è¼ƒä½å“è³ªè¨­å®šä¸‹ä»èƒ½ä¿æŒè‰¯å¥½ç•«è³ªï¼Œå»ºè­°ä½¿ç”¨ 60-80%</span>
        </div>
      </div>

      <!-- Progress Bar -->
      <div id="progressContainer" class="progress-container">
        <div class="progress-bar">
          <div id="progressFill" class="progress-fill"></div>
        </div>
        <p id="progressText" class="progress-text" data-i18n="converting">è½‰æ›ä¸­...</p>
      </div>

      <!-- Preview Area -->
      <div id="previewArea" class="preview-area" style="display: none;">
        <div class="preview-box">
          <div class="preview-header">
            <h4 data-i18n="original">åŸå§‹åœ–ç‰‡</h4>
            <span id="originalSize" class="file-size">-</span>
          </div>
          <div class="preview-image-container">
            <img id="originalImage" alt="Original">
          </div>
        </div>
        <div class="preview-box">
          <div class="preview-header">
            <h4 data-i18n="converted">è½‰æ›çµæœ</h4>
            <span id="convertedSize" class="file-size">-</span>
          </div>
          <div class="preview-image-container">
            <img id="convertedImage" alt="Converted">
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button id="convertBtn" class="btn btn-primary" disabled>
          <span>ğŸ”„</span>
          <span data-i18n="convert">é–‹å§‹è½‰æ›</span>
        </button>
        <button id="downloadBtn" class="btn btn-success" style="display: none;">
          <span>â¬‡ï¸</span>
          <span id="downloadText" data-i18n="download_avif">ä¸‹è¼‰ AVIF</span>
        </button>
        <button id="resetBtn" class="btn btn-secondary" style="display: none;">
          <span>ğŸ—‘ï¸</span>
          <span data-i18n="reset">é‡ç½®</span>
        </button>
      </div>

      <!-- Performance Info -->
      <div id="performanceInfo" class="settings-panel" style="display: none;">
        <h3>ğŸ“Š æ•ˆèƒ½è³‡è¨Š</h3>
        <div class="setting-row">
          <label>è™•ç†æ™‚é–“</label>
          <span id="processTime">-</span>
        </div>
        <div class="setting-row">
          <label>æª”æ¡ˆè®ŠåŒ–</label>
          <span id="compressionRatio">-</span>
        </div>
        <div class="setting-row">
          <label>è§£æåº¦</label>
          <span id="imageResolution">-</span>
        </div>
      </div>
    </main>

    <footer class="footer">
      <p data-i18n="footer_privacy">æ‰€æœ‰æª”æ¡ˆè™•ç†å‡åœ¨æœ¬åœ°å®Œæˆï¼Œä¸æœƒä¸Šå‚³åˆ°ä¼ºæœå™¨</p>
    </footer>
  </div>

  <script type="module" src="/src/i18n/i18n.js"></script>
  <script type="module" src="./converter.js"></script>
</body>
</html>
